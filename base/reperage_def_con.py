"""
Created on Sat Mar  9 14:10:00 2019

@author: manon
"""
import re
from texteval import load
from reperage_verbeconj_prorel_sub import meanFromList
import textstat

def reperage_connecteurs_flesch(target):
	data = load(target)
	connecteurs = [ r"\bafin de\b",  r"\bafin d'\b",  r"\bafin que\b",  r"\bafin qu'\b",  r"\bainsi\b",  r"\balors\b",  r"\balors même que\b",  r"\balors même qu'\b",  r"\balors que\b",  r"\balors qu'\b",  r"\baprès\b",  r"\baprès que\b",  r"\baprès qu'\b",  r"\baprès tout\b",  r"\baprès quoi\b",  r"\battendu que\b",  r"\battendu qu'\b",  r"\bau bout du compte\b",  r"\bau cas où\b",  r"\bau contraire\b",  r"\bau fait\b",  r"\bau fur et à mesure que\b",  r"\bau fur et à mesure qu'\b",  r"\bau lieu\b",  r"\bau lieu de\b",  r"\bau lieu d'\b",  r"\bau moins\b",  r"\bau moment de\b",  r"\bau moment d'\b",  r"\bau moment où\b",  r"\bau même titre que\b",  r"\bau même titre qu'\b",  r"\bau point de\b",  r"\bau point d'\b",  r"\bau point que\b",  r"\bau point qu'\b",  r"\bau total\b",  r"\bauparavant\b",  r"\baussi longtemps que\b",  r"\baussi longtemps qu'\b",  r"\baussitôt\b",  r"\baussitôt que\b",  r"\baussitôt qu'\b",  r"\bautant dire que\b",  r"\bautant dire qu'\b",  r"\bautrement\b",  r"\bautrement dit\b",   r"\bavant de\b",  r"\bavant d'\b",  r"\bavant même de\b",  r"\bavant même d'\b",  r"\bavant même que\b",  r"\bavant même qu'\b",  r"\bavant que\b",  r"\bavant qu'\b",  r"\bavant qu'\b",  r"\bbien que\b",  r"\bbien qu'\b",  r"\bbientôt\b",  r"\bbref\b",  r"\bc'est pourquoi\b",  r"\bc'est à dire que\b",  r"\bc'est à dire qu'\b",  r"\bcar\b",  r"\bcependant\b",  r"\bcependant que\b",  r"\bcependant qu'\b",  r"\bcette fois que\b",  r"\bcette fois qu'\b",  r"\bcomme ça\b",  r"\bcomme quoi\b",  r"\bcomme si\b",  r"\bcomparativement\b",  r"\bconsidérant que\b",  r"\bconsidérant qu'\b",  r"\bcela dit\b",  r"\bceci dit\b",  r"\bceci étant dit\b",  r"\bconsidéré que\b",  r"\bconsidéré qu'\b",  r"\bconséquemment\b",  r"\bcorrélativement\b",  r"\bdéjà\b",  r"\bdéjà que\b",  r"\bdéjà qu'\b",  r"\bd'abord\b",  r"\bensuite\b",  r"\btout d'abord\b",  r"\bd'ailleurs\b",  r"\bd'autant plus que\b",  r"\bd'autant plus qu'\b",  r"\bd'autant que\b",  r"\bd'autant qu'\b",  r"\bd'une part (...d'autre part)\b",  r"\bd'autre part\b",  r"\bd'un côté (...d'un autre côté)\b",  r"\bd'un autre côté\b",  r"\bd'ici que\b",  r"\bd'ici qu'\b",  r"\bd'où\b",  r"\bd'où que\b",  r"\bd'où qu'\b",  r"\bdans ce cas\b",  r"\bdans ce cas-là\b",  r"\ben ce cas\b",  r"\bdans l'espoir de\b",  r"\bdans l'espoir d'\b",  r"\bdans l'espoir que\b",  r"\bdans l'espoir qu'\b",  r"\bdans l'hypothèse où\b",  r"\bdans l'intention de\b",  r"\bdans l'intention d'\b",  r"\bdans l'intention que\b",  r"\bdans l'intention qu'\b",  r"\bdans la mesure où\b",  r"\bdans le but de\b",  r"\bdans le but d'\b",  r"\bdans le but que\b",  r"\bdans le but qu'\b",  r"\bdans le cas où\b",  r"\bdans tous les cas\b",  r"\ben tous les cas\b",  r"\ben tout cas\b",  r"\ben tous cas\b",  r"\bde ce fait\b",  r"\bde telle façon que\b",  r"\bde telle façon qu'\b",  r"\bde façon que\b",  r"\bde façon qu'\b",  r"\bde façon à\b",  r"\bde façon à ce que\b",  r"\bde façon à ce qu'\b",  r"\bde fait\b",  r"\bde la même façon\b",  r"\bde la même façon que\b",  r"\bde la même façon qu'\b",  r"\bde la même manière\b",  r"\bde la même manière que\b",  r"\bde la même manière qu'\b",  r"\bde telle manière que\b",  r"\bde telle manière qu'\b",  r"\bde manière que\b",  r"\bde manière qu'\b",  r"\bde manière à\b",  r"\bde manière à ce que\b",  r"\bde manière à ce qu'\b",  r"\bde même\b",  r"\bde même que\b",  r"\bde même qu'\b",  r"\bde plus\b",  r"\bde sorte que\b",  r"\bde sorte qu'\b",  r"\bde toute façon\b",  r"\bde toutes façons\b",  r"\bde toute manière\b",  r"\bde toutes manières\b",  r"\bdepuis\b",  r"\bdepuis que\b",  r"\bdepuis qu'\b",  r"\bdes fois que\b",  r"\bdes fois qu'\b",  r"\bdire que\b",  r"\bdire qu'\b",  r"\bet dire que\b",  r"\bet dire qu'\b",  r"\bdonc\b",  r"\bdu coup\b",  r"\bdans le coup\b",  r"\bdu fait que\b",  r"\bdu fait qu'\b",  r"\bdu moins\b",  r"\bdu moment que\b",  r"\bdu moment qu'\b",  r"\bdu temps où\b",  r"\bdu reste\b",  r"\bdécidément\b",  r"\bdès lors que\b",  r"\bdès lors qu'\b",  r"\bdès lors\b",  r"\bdès que\b",  r"\bdès qu'\b",  r"\beffectivement\b",  r"\ben effet\b",  r"\btout en\b",  r"\ben admettant que\b",  r"\ben admettant qu'\b",  r"\ben attendant\b",  r"\ben bref\b",  r"\ben ce sens que\b",  r"\ben ce sens qu'\b",  r"\bdans le sens que\b",  r"\bdans le sens qu'\b",  r"\bdans le sens où\b",  r"\ben comparaison\b",  r"\bpar comparaison\b",  r"\ben conséquence\b",  r"\ben d'autres termes\b",  r"\ben définitive\b",  r"\ben dépit du fait que\b",  r"\ben dépit du fait qu'\b",  r"\ben dépit que\b",  r"\ben dépit qu'\b",  r"\ben fait\b",  r"\ben gros\b",  r"\ben même temps que\b",  r"\ben même temps qu'\b",  r"\ben même temps\b",  r"\ben outre\b",  r"\ben particulier\b",  r"\ben plus\b",  r"\ben plus de\b",  r"\ben plus d'\b",  r"\ben revanche\b",  r"\ben réalité\b",  r"\ben résumé\b",  r"\ben somme\b",  r"\ben supposant que\b",  r"\ben supposant qu'\b",  r"\ben vue de\b",  r"\ben vue d'\b",  r"\ben vérité\b",  r"\bencore\b",  r"\bencore que\b",  r"\bencore qu'\b",  r"\benfin\b",  r"\benfin\b",  r"\bensuite\b",  r"\ben tout état de cause\b",  r"\bet puis\b",  r"\bexcepté que\b",  r"\bexcepté qu'\b",  r"\bfaute de\b",  r"\bfaute d'\b",  r"\bfinalement\b",  r"\bglobalement\b",  r"\bhistoire de\b",  r"\bhistoire d'\b",  r"\bhormis le fait que\b",  r"\bhormis le fait qu'\b",  r"\bhormis que\b",  r"\bhormis qu'\b",  r"\binstantanément\b",  r"\binversement\b",  r"\bjusqu'à\b",  r"\bjusqu'à ce que\b",  r"\bjusqu'à ce qu'\b",  r"\ble fait est que\b",  r"\ble fait est qu'\b",  r"\ble jour où\b",  r"\ble temps que\b",  r"\ble temps qu'\b",  r"\ble temps qu'\b",  r"\blorsque\b",  r"\blorsqu'\b",  r"\blorsqu'\b",  r"\bmaintenant\b",  r"\bmaintenant que\b",  r"\bmaintenant qu'\b",  r"\bmalgré le fait que\b",  r"\bmalgré le fait qu'\b",  r"\bmalgré que\b",  r"\bmalgré qu'\b",  r"\bmalgré tout\b",  r"\bmalheureusement\b",  r"\bmis à part le fait que\b",  r"\bmis à part le fait qu'\b",  r"\bmis à part que\b",  r"\bmis à part qu'\b",  r"\bmême que\b",  r"\bmême qu'\b",  r"\bmême si\b",  r"\bnonobstant\b",  r"\bnonobstant que\b",  r"\bnonobstant qu'\b",  r"\bnéanmoins\b",  r"\b or \b",  r"\bou bien\b",  r"\boutre que\b",  r"\boutre qu'\b",  r"\bpar ailleurs\b",  r"\bpar conséquent\b",  r"\bpar contre\b",  r"\bpar le fait que\b",  r"\bpar le fait qu'\b",  r"\bpar suite\b",  r"\bpar-dessus tout\b",  r"\bparallèlement\b",  r"\bparce que\b",  r"\bparce qu'\b",  r"\bpendant que\b",  r"\bpendant qu'\b",  r"\bpendant qu'\b",  r"\bpeu importe\b",  r"\bplus que\b",  r"\bplus qu'\b",  r"\bplus tard\b",  r"\bplutôt\b",  r"\bplutôt que\b",  r"\bplutôt qu'\b",  r"\bplutôt que de\b",  r"\bplutôt que d'\b",  r"\bpour que\b",  r"\bpour qu'\b",  r"\bpour autant\b",  r"\bpour autant que\b",  r"\bpour autant qu'\b",  r"\bpour commencer\b",  r"\bpour conclure\b",  r"\bpour finir\b",  r"\bpour résumer\b",  r"\bpour terminer\b",  r"\bpour le coup\b",  r"\bpour peu que\b",  r"\bpour peu qu'\b",  r"\bpour une fois que\b",  r"\bpour une fois qu'\b",  r"\bpourtant\b",  r"\bpourvu que\b",  r"\bpourvu qu'\b",  r"\bpremièrement\b",  r"\bpreuve que\b",  r"\bpreuve qu'\b",  r"\bla preuve\b",  r"\bpour preuve\b",  r"\bà preuve\b",  r"\bpuis\b",  r"\bpuisque\b",  r"\bpuisqu'\b",  r"\bquand même\b",  r"\bquand bien même\b",  r"\bquand bien même que\b",  r"\bquand bien même qu'\b",  r"\bquant à\b",  r"\bquitte à\b",  r"\bquitte à ce que\b",  r"\bquitte à ce qu'\b",  r"\bquoi qu'il en soit\b",  r"\bquoique\b",  r"\bquoiqu'\b",  r"\bremarque\b",  r"\bréciproquement\b",  r"\bréflexion faite\b",  r"\brésultat\b",  r"\bsachant que\b",  r"\bsachant qu'\b",  r"\bsans que\b",  r"\bsans qu'\b",  r"\bsans compter que\b",  r"\bsans compter qu'\b",  r"\bsans oublier que\b",  r"\bsans oublier qu'\b",  r"\bsauf que\b",  r"\bsauf qu'\b",  r"\bsauf à\b",  r"\bselon que\b",  r"\bselon qu'\b",  r"\bsi bien que\b",  r"\bsi bien qu'\b",  r"\bsi ce n'est que\b",  r"\bsi ce n'est qu'\b",  r"\bsi tant est que\b",  r"\bsi tant est qu'\b",  r"\bsimultanément\b",  r"\bsinon\b",  r"\bsinon\b",  r"\bsinon que\b",  r"\bsinon qu'\b",  r"\bsitôt que\b",  r"\bsitôt qu'\b",   r"\bsoit dit en passant\b",  r"\bsomme toute\b",  r"\bsoudain\b",  r"\bsubséquemment\b",  r"\bsuivant que\b",  r"\bsuivant qu'\b",  r"\bsurtout\b",  r"\bsurtout que\b",  r"\bsurtout qu'\b",  r"\btandis que\b",  r"\btandis qu'\b",  r"\btant et si bien que\b",  r"\btant et si bien qu'\b",  r"\btant que\b",  r"\btant qu'\b",  r"\btout à coup\b",  r"\bd'un coup\b",  r"\bd'un seul coup\b",  r"\btout au moins\b",  r"\btout bien considéré\b",  r"\btout compte fait\b",  r"\btout de même\b",  r"\bun jour\b",  r"\bun jour que\b",  r"\bun jour qu'\b",  r"\bun peu plus tard\b",  r"\bune fois que\b",  r"\bune fois qu'\b",  r"\bvu que\b",  r"\bvu qu'\b",  r"\bà ça près que\b",  r"\bà ça près qu'\b",  r"\bà ceci près que\b",  r"\bà ceci près qu'\b",  r"\bà cela près que\b",  r"\bà cela près qu'\b",  r"\bà cet égard\b",  r"\bà dire vrai\b",  r"\bà défaut de\b",  r"\bà défaut d'\b",  r"\bà force\b",  r"\bà force de\b",  r"\bà force d'\b",  r"\bà l'heure où\b",  r"\bà l'instant où\b",  r"\bà l'instant où\b",  r"\bà l'époque où\b",  r"\bà l'inverse\b",  r"\bà ce moment-là\b",  r"\bà condition de\b",  r"\bà condition d'\b",  r"\bà condition que\b",  r"\bà condition qu'\b",  r"\bà la place\b",  r"\bà la réflexion\b",  r"\bà mesure que\b",  r"\bà mesure qu'\b",  r"\bà moins de\b",  r"\bà moins d'\b",  r"\bà moins que\b",  r"\bà moins qu'\b",  r"\bà part que\b",  r"\bà part qu'\b",  r"\bà part ça\b",  r"\bà partir du moment où\b",  r"\bà propos\b",  r"\bà ce propos\b",  r"\bà présent que\b",  r"\bà présent qu'\b",  r"\bà seule fin de\b",  r"\bà seule fin d'\b",  r"\bà seule fin que\b",  r"\bà seule fin qu'\b",  r"\bà supposer que\b",  r"\bà supposer qu'\b",  r"\bà tel point que\b",  r"\bà tel point qu'\b",  r"\bà ce point que\b",  r"\bà ce point qu'\b",  r"\bà telle enseigne que\b",  r"\bà telle enseigne qu'\b",  r"\b à vrai dire\b",  r"\bégalement\b",  r"\bétant donné que\b",  r"\bétant donné qu'\b",  r"\bmieux\b",r"\ben\b",r"\bmais\b",r"\bet\b",r"\bmême\b",r"\bou\b",r"\bpour\b",r"\bsans\b",r"\bquand\b",r"\bsi\b",r"\bsoit\b",r"\bcomme\b",r"\btotal\b",r"\bà\b",r"\bà en\b",r"\baussi\b",r"\bautant\b",r"\bavant\b",r"\bpar exemple\b"]
	numConnecteurs=0
	scoresF = []
	for sentence in data:
		phrase = ''
		for word in sentence.words:
			phrase += word.form + ' '
		for con in connecteurs:
			match = re.search(con,phrase)
			if match: 
				numConnecteurs += 1 
		scoresF.append(textstat.flesch_kincaid_grade(phrase))
	print("Nombre de connecteurs : ",numConnecteurs)
	print("FLESCH",meanFromList(scoresF))
	return { 
		'NB_CONNECTEUR' : numConnecteurs, 
		'FLESCH' : meanFromList(scoresF)
		} 
def reperage_definition(target):
	patrons = ["c'est-à-dire","à savoir", "par exemple", "comme par exemple", "comme", "tel", "tels", "telle", "telles", "soit", "type de", "type d'","du type", "groupe de", "groupe d'", "race", "espèce de", "espèce d'", "sorte de", "sorte d'", "signifie", "signifient", "désigne", "désignent", r"\("] 
	data=load(target)
	nbPatrons=0
	for sentence in data:
		phrase = ''
		for word in sentence.words:
			phrase += word.form + ' '
		for con in patrons:
			match = re.search(con,phrase)
			if match:
				nbPatrons+=1
	print("Définitions : ",nbPatrons)
	return { 
		'NB_PATRONS' : nbPatrons,
		} 

if __name__ == "__main__":
	reperage_connecteurs_flesch("ema.tal")
